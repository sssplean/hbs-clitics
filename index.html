<!DOCTYPE html>
<html lang="bs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Trena≈æer enklitika</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #fdf6f0;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 30px;
    }

    h2 {
      color: #555;
    }

    .sentence-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      margin: 20px 0;
      background-color: #fff9f4;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #e3d5ca;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .word-slot {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px 12px;
      min-width: 50px;
      border-radius: 10px;
      background-color: #ffffff;
      border: 1px solid #ddd;
      font-size: 16px;
      position: relative;
    }

    .drop-target {
      width: 10px;
      height: 36px;
      margin: 0 4px;
      background-color: transparent;
      border: 2px dashed transparent;
      transition: background-color 0.2s, border-color 0.2s;
    }

    .drop-target.drag-over {
      border-color: #ffc9c9;
      background-color: #ffeaea;
      border-radius: 5px;
    }

    .clitic-option {
      display: inline-block;
      background-color: #ffe8d6;
      color: #444;
      border: 1px solid #f0d5c9;
      padding: 8px 12px;
      margin: 8px;
      border-radius: 10px;
      cursor: grab;
      transition: transform 0.1s ease;
    }

    .clitic-option:active {
      transform: scale(0.95);
    }

    #cliticOptions {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    #feedback {
      margin-top: 20px;
      font-weight: bold;
    }

    button {
      margin-top: 30px;
      padding: 10px 20px;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      background-color: #f0baba;
      color: white;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    button:hover {
      background-color: #e89f9f;
    }
  </style>
</head>
<body>

<h2>Ubaci enklitiku na pravo mjesto</h2>

<div id="sentence" class="sentence-container"></div>

<p>Odaberi i prevuci enklitiku:</p>
<div id="cliticOptions"></div>

<div id="feedback"></div>

<button onclick="loadExample()">üîÅ Novi primjer</button>

<script>
  const examples = [
    {
      parts: ['Ana', 'vidjela', 'Marka', 'juƒçer.'],
      clitic: 'je',
      distractors: ['mu', 'li']
    },
    {
      parts: ['Petar', 'kupio', 'novi', 'bicikl.'],
      clitic: 'je',
      distractors: ['ga', 'li']
    },
    {
      parts: ['Zna≈°', 'gdje', 'on', '≈æivi?'],
      clitic: 'li',
      distractors: ['se', 'mu']
    }
  ];

  let currentExample = {};

  function loadExample() {
    const sentence = document.getElementById('sentence');
    const cliticOptions = document.getElementById('cliticOptions');
    const feedback = document.getElementById('feedback');
    sentence.innerHTML = '';
    cliticOptions.innerHTML = '';
    feedback.textContent = '';

    currentExample = examples[Math.floor(Math.random() * examples.length)];

    currentExample.parts.forEach((word, i) => {
      // Dropzone before each word
      const drop = document.createElement('div');
      drop.className = 'drop-target';
      drop.dataset.index = i;
      drop.addEventListener('dragover', e => {
        e.preventDefault();
        drop.classList.add('drag-over');
      });
      drop.addEventListener('dragleave', () => drop.classList.remove('drag-over'));
      drop.addEventListener('drop', e => {
        e.preventDefault();
        drop.classList.remove('drag-over');
        const data = e.dataTransfer.getData('text/plain');
        checkAnswer(i, data);
      });
      sentence.appendChild(drop);

      const wordEl = document.createElement('div');
      wordEl.className = 'word-slot';
      wordEl.textContent = word;
      sentence.appendChild(wordEl);
    });

    // Add one final dropzone at the end
    const finalDrop = document.createElement('div');
    finalDrop.className = 'drop-target';
    finalDrop.dataset.index = currentExample.parts.length;
    finalDrop.addEventListener('dragover', e => {
      e.preventDefault();
      finalDrop.classList.add('drag-over');
    });
    finalDrop.addEventListener('dragleave', () => finalDrop.classList.remove('drag-over'));
    finalDrop.addEventListener('drop', e => {
      e.preventDefault();
      finalDrop.classList.remove('drag-over');
      const data = e.dataTransfer.getData('text/plain');
      checkAnswer(currentExample.parts.length, data);
    });
    sentence.appendChild(finalDrop);

    // Mix correct clitic with distractors
    const allOptions = [...currentExample.distractors, currentExample.clitic].sort(() => Math.random() - 0.5);
    allOptions.forEach(c => {
      const opt = document.createElement('div');
      opt.className = 'clitic-option';
      opt.textContent = c;
      opt.draggable = true;
      opt.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', c);
      });
      cliticOptions.appendChild(opt);
    });
  }

  function checkAnswer(index, clitic) {
    const correctIndex = currentExample.parts.findIndex((_, i) => {
      const test = [...currentExample.parts];
      test.splice(i, 0, clitic);
      return test.join(' ') === [...currentExample.parts.slice(0, index), clitic, ...currentExample.parts.slice(index)].join(' ');
    });

    const feedback = document.getElementById('feedback');
    if (clitic === currentExample.clitic && index === correctIndex) {
      feedback.textContent = '‚úÖ Taƒçno!';
      feedback.style.color = 'green';
    } else {
      feedback.textContent = `‚ùå Nije taƒçno. Poku≈°aj ponovo.`;
      feedback.style.color = 'red';
    }
  }

  loadExample();
</script>

</body>
</html>
